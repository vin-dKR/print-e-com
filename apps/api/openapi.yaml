openapi: 3.0.3
info:
  title: Custom Printing E-commerce API
  version: 1.0.0
  description: >-
    OpenAPI specification generated from JSDoc annotations in the Express
    codebase.
servers:
  - url: http://localhost:3002
    description: Local server
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
paths:
  /api/v1/auth/register:
    post:
      summary: Register a new customer
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                phone:
                  type: string
                name:
                  type: string
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
      responses:
        '201':
          description: Customer registered successfully.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    required:
                      - id
                      - email
                      - name
                    properties:
                      id:
                        type: string
                      email:
                        type: string
                        format: email
                      name:
                        type: string
        '400':
          description: Validation or registration error.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - error
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
                example:
                  success: false
                  error: Invalid email format
  /api/v1/auth/login:
    post:
      summary: Login a customer
      tags:
        - Auth
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
                  format: password
      responses:
        '200':
          description: Login successful.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    required:
                      - user
                      - token
                    properties:
                      token:
                        type: string
                      user:
                        type: object
                        required:
                          - id
                          - email
                          - name
                        properties:
                          id:
                            type: string
                          email:
                            type: string
                            format: email
                          name:
                            type: string
        '401':
          description: Invalid credentials.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - error
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
                example:
                  success: false
                  error: Invalid email or password format or others
  /api/v1/auth/user/profile:
    get:
      summary: Get current customer profile
      tags:
        - Auth
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Customer profile returned.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    required:
                      - id
                      - email
                      - name
                      - isAdmin
                    properties:
                      id:
                        type: string
                      email:
                        type: string
                        format: email
                      name:
                        type: string
                      phone:
                        type: string
                      isAdmin:
                        type: boolean
                      addresses:
                        type: array
                        items:
                          type: object
                      createdAt:
                        type: string
                        format: date-time
        '401':
          description: Unauthorized.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - error
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
    put:
      summary: Update customer profile
      tags:
        - Auth
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                phone:
                  type: string
      responses:
        '200':
          description: Profile updated successfully.
        '401':
          description: Unauthorized.
  /api/v1/auth/user/password:
    put:
      summary: Update user password
      tags:
        - Auth
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - currentPassword
                - newPassword
              properties:
                currentPassword:
                  type: string
                newPassword:
                  type: string
      responses:
        '200':
          description: Password updated successfully.
        '400':
          description: Invalid input or incorrect current password.
        '401':
          description: Unauthorized.
  /api/v1/auth/user/notifications:
    put:
      summary: Update notification preferences
      tags:
        - Auth
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - preferences
              properties:
                preferences:
                  type: object
      responses:
        '200':
          description: Notification preferences updated successfully.
        '401':
          description: Unauthorized.
  /api/v1/auth/user/account:
    delete:
      summary: Delete user account
      tags:
        - Auth
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Account deleted successfully.
        '401':
          description: Unauthorized.
  /api/v1/cart:
    get:
      summary: Get current cart
      tags:
        - Cart
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Cart details.
        '401':
          description: Unauthorized.
  /api/v1/cart/items:
    post:
      summary: Add item to cart
      tags:
        - Cart
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - productId
                - quantity
              properties:
                productId:
                  type: string
                quantity:
                  type: integer
                variantId:
                  type: string
      responses:
        '201':
          description: Item added to cart.
        '400':
          description: Validation error.
        '401':
          description: Unauthorized.
  /api/v1/cart/items/{itemId}:
    put:
      summary: Update cart item
      tags:
        - Cart
      security:
        - bearerAuth: []
      parameters:
        - name: itemId
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                quantity:
                  type: integer
      responses:
        '200':
          description: Cart item updated.
        '400':
          description: Validation error.
        '401':
          description: Unauthorized.
    delete:
      summary: Remove cart item
      tags:
        - Cart
      security:
        - bearerAuth: []
      parameters:
        - name: itemId
          in: path
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Cart item removed.
        '401':
          description: Unauthorized.
  /api/v1/cart/clear:
    delete:
      summary: Clear cart
      tags:
        - Cart
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Cart cleared.
        '401':
          description: Unauthorized.
  /api/v1/customer/orders/{id}/track:
    get:
      summary: Track an order by ID
      tags:
        - Orders
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Order tracking info.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    required:
                      - orderId
                      - status
                      - timeline
                    properties:
                      orderId:
                        type: string
                      status:
                        type: string
                      timeline:
                        type: array
                        items:
                          type: object
        '404':
          description: Order not found.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - error
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
  /api/v1/customer/address:
    post:
      summary: Create customer address
      tags:
        - Customer
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - street
                - city
                - state
                - zipCode
                - country
              properties:
                street:
                  type: string
                city:
                  type: string
                state:
                  type: string
                zipCode:
                  type: string
                country:
                  type: string
      responses:
        '200':
          description: Address created.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    required:
                      - id
                      - userId
                      - street
                      - city
                      - state
                      - zipCode
                      - country
                    properties:
                      id:
                        type: string
                      userId:
                        type: string
                      street:
                        type: string
                      city:
                        type: string
                      state:
                        type: string
                      zipCode:
                        type: string
                      country:
                        type: string
        '400':
          description: Validation error.
        '401':
          description: Unauthorized.
  /api/v1/customer/address/{id}:
    put:
      summary: Update customer address
      tags:
        - Customer
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                street:
                  type: string
                city:
                  type: string
                state:
                  type: string
                zipCode:
                  type: string
                country:
                  type: string
                isDefault:
                  type: boolean
      responses:
        '200':
          description: Address updated.
        '400':
          description: Validation error.
        '401':
          description: Unauthorized.
        '404':
          description: Address not found.
    delete:
      summary: Delete customer address
      tags:
        - Customer
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Address deleted.
        '401':
          description: Unauthorized.
        '404':
          description: Address not found.
  /api/v1/customer/orders:
    post:
      summary: Create an order
      tags:
        - Orders
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - items
                - addressId
                - paymentMethod
              properties:
                items:
                  type: array
                  items:
                    type: object
                    required:
                      - productId
                      - quantity
                    properties:
                      productId:
                        type: string
                      quantity:
                        type: integer
                      variantId:
                        type: string
                      customDesignUrl:
                        type: string
                      customText:
                        type: string
                addressId:
                  type: string
                couponCode:
                  type: string
                shippingCharges:
                  type: number
                paymentMethod:
                  type: string
                  enum:
                    - ONLINE
                    - OFFLINE
      responses:
        '201':
          description: Order created.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      status:
                        type: string
                      subtotal:
                        type: number
                      total:
                        type: number
                      discountAmount:
                        type: number
                        nullable: true
                      shippingCharges:
                        type: number
                        nullable: true
                      items:
                        type: array
                        items:
                          type: object
        '400':
          description: Validation error.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - error
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
        '401':
          description: Unauthorized.
    get:
      summary: Get current customer's orders
      tags:
        - Orders
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of customer orders.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    required:
                      - orders
                      - pagination
                    properties:
                      orders:
                        type: array
                        items:
                          type: object
                      pagination:
                        type: object
                        required:
                          - page
                          - limit
                          - total
                          - totalPages
                        properties:
                          page:
                            type: integer
                          limit:
                            type: integer
                          total:
                            type: integer
                          totalPages:
                            type: integer
        '401':
          description: Unauthorized.
  /api/v1/customer/orders/{id}:
    get:
      summary: Get a customer's order by ID
      tags:
        - Orders
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Order details.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '401':
          description: Unauthorized.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - error
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
        '404':
          description: Order not found.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - error
                properties:
                  success:
                    type: boolean
                  error:
                    type: string
  /api/v1/admin/coupons:
    get:
      summary: Get all coupons
      description: Admin can view all coupons with usage statistics
      tags:
        - Admin
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of coupons retrieved successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        code:
                          type: string
                        name:
                          type: string
                        description:
                          type: string
                          nullable: true
                        discountType:
                          type: string
                          enum:
                            - PERCENTAGE
                            - FIXED
                        discountValue:
                          type: number
                        minPurchaseAmount:
                          type: number
                          nullable: true
                        maxDiscountAmount:
                          type: number
                          nullable: true
                        usageLimit:
                          type: integer
                          nullable: true
                        usageLimitPerUser:
                          type: integer
                        validFrom:
                          type: string
                          format: date-time
                        validUntil:
                          type: string
                          format: date-time
                        isActive:
                          type: boolean
                        applicableTo:
                          type: string
                          enum:
                            - ALL
                            - CATEGORY
                            - PRODUCT
                        createdAt:
                          type: string
                          format: date-time
                        updatedAt:
                          type: string
                          format: date-time
                        _count:
                          type: object
                          properties:
                            usages:
                              type: integer
        '401':
          description: Unauthorized - Admin authentication required
    post:
      summary: Create new coupon
      description: Admin can create a new discount coupon
      tags:
        - Admin
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - code
                - name
                - discountType
                - discountValue
                - validFrom
                - validUntil
              properties:
                code:
                  type: string
                  example: SAVE20
                name:
                  type: string
                  example: Save 20% Off
                description:
                  type: string
                  example: Get 20% off on all products
                discountType:
                  type: string
                  enum:
                    - PERCENTAGE
                    - FIXED
                  example: PERCENTAGE
                discountValue:
                  type: number
                  example: 20
                minPurchaseAmount:
                  type: number
                  nullable: true
                  example: 1000
                maxDiscountAmount:
                  type: number
                  nullable: true
                  example: 500
                usageLimit:
                  type: integer
                  nullable: true
                  example: 100
                usageLimitPerUser:
                  type: integer
                  example: 1
                validFrom:
                  type: string
                  format: date-time
                  example: '2024-01-01T00:00:00Z'
                validUntil:
                  type: string
                  format: date-time
                  example: '2024-12-31T23:59:59Z'
                isActive:
                  type: boolean
                  example: true
                applicableTo:
                  type: string
                  enum:
                    - ALL
                    - CATEGORY
                    - PRODUCT
                  example: ALL
      responses:
        '200':
          description: Coupon created successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                  - message
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                    example: Coupon created successfully
                  data:
                    type: object
        '400':
          description: Validation error or coupon code already exists
        '401':
          description: Unauthorized - Admin authentication required
  /api/v1/admin/coupons/{id}:
    get:
      summary: Get single coupon by ID
      description: Admin can view detailed coupon information including usage history
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Coupon ID
          schema:
            type: string
      responses:
        '200':
          description: Coupon details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      code:
                        type: string
                      name:
                        type: string
                      description:
                        type: string
                        nullable: true
                      discountType:
                        type: string
                      discountValue:
                        type: number
                      minPurchaseAmount:
                        type: number
                        nullable: true
                      maxDiscountAmount:
                        type: number
                        nullable: true
                      usageLimit:
                        type: integer
                        nullable: true
                      usageLimitPerUser:
                        type: integer
                      validFrom:
                        type: string
                        format: date-time
                      validUntil:
                        type: string
                        format: date-time
                      isActive:
                        type: boolean
                      applicableTo:
                        type: string
                      usages:
                        type: array
                        items:
                          type: object
                      offerProducts:
                        type: array
                        items:
                          type: object
                      _count:
                        type: object
        '401':
          description: Unauthorized - Admin authentication required
        '404':
          description: Coupon not found
    put:
      summary: Update coupon
      description: Admin can update coupon details
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Coupon ID
          schema:
            type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
                discountType:
                  type: string
                  enum:
                    - PERCENTAGE
                    - FIXED
                discountValue:
                  type: number
                minPurchaseAmount:
                  type: number
                  nullable: true
                maxDiscountAmount:
                  type: number
                  nullable: true
                usageLimit:
                  type: integer
                  nullable: true
                usageLimitPerUser:
                  type: integer
                validFrom:
                  type: string
                  format: date-time
                validUntil:
                  type: string
                  format: date-time
                isActive:
                  type: boolean
                applicableTo:
                  type: string
                  enum:
                    - ALL
                    - CATEGORY
                    - PRODUCT
      responses:
        '200':
          description: Coupon updated successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                  - message
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                    example: Coupon updated successfully
                  data:
                    type: object
        '401':
          description: Unauthorized - Admin authentication required
        '404':
          description: Coupon not found
    delete:
      summary: Delete coupon
      description: Admin can delete a coupon
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Coupon ID
          schema:
            type: string
      responses:
        '200':
          description: Coupon deleted successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - message
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Coupon deleted successfully
                  data:
                    type: null
        '401':
          description: Unauthorized - Admin authentication required
        '404':
          description: Coupon not found
  /api/v1/admin/orders:
    get:
      summary: Get all orders (admin)
      description: >
        Returns a paginated list of orders for admin users. Supports filtering
        by status and free-text search over order ID, customer email, and
        customer name.
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: status
          in: query
          required: false
          schema:
            type: string
            enum:
              - PENDING_REVIEW
              - PROCESSING
              - SHIPPED
              - DELIVERED
              - CANCELLED
        - name: search
          in: query
          required: false
          schema:
            type: string
          description: >-
            Search by order ID, customer email, or customer name
            (case-insensitive).
      responses:
        '200':
          description: List of orders retrieved successfully.
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    required:
                      - orders
                      - pagination
                    properties:
                      orders:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            total:
                              type: number
                            status:
                              type: string
                            createdAt:
                              type: string
                              format: date-time
                            updatedAt:
                              type: string
                              format: date-time
                            user:
                              type: object
                              properties:
                                id:
                                  type: string
                                email:
                                  type: string
                                  format: email
                                name:
                                  type: string
                                  nullable: true
                            address:
                              type: object
                            items:
                              type: array
                              items:
                                type: object
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                          limit:
                            type: integer
                          total:
                            type: integer
                          totalPages:
                            type: integer
        '401':
          description: Unauthorized - admin authentication required.
        '403':
          description: Forbidden - user is not an admin.
  /api/v1/admin/payments:
    get:
      summary: Get all payments
      description: Admin can view all payment transactions
      tags:
        - Admin
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of payments retrieved successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        orderId:
                          type: string
                        userId:
                          type: string
                        amount:
                          type: number
                        discountAmount:
                          type: number
                          nullable: true
                        razorpayOrderId:
                          type: string
                          nullable: true
                        razorpayPaymentId:
                          type: string
                          nullable: true
                        status:
                          type: string
                          enum:
                            - PENDING
                            - SUCCESS
                            - FAILED
                            - REFUNDED
                        method:
                          type: string
                          enum:
                            - ONLINE
                            - COD
                            - WALLET
                        couponId:
                          type: string
                          nullable: true
                        createdAt:
                          type: string
                          format: date-time
                        updatedAt:
                          type: string
                          format: date-time
                        user:
                          type: object
                          properties:
                            id:
                              type: string
                            name:
                              type: string
                            email:
                              type: string
                        order:
                          type: object
                          properties:
                            id:
                              type: string
                            status:
                              type: string
                            total:
                              type: number
        '401':
          description: Unauthorized - Admin authentication required
  /api/v1/admin/payments/{id}:
    get:
      summary: Get single payment by ID
      description: Admin can view detailed payment information
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Payment ID
          schema:
            type: string
      responses:
        '200':
          description: Payment details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      orderId:
                        type: string
                      userId:
                        type: string
                      amount:
                        type: number
                      discountAmount:
                        type: number
                        nullable: true
                      razorpayOrderId:
                        type: string
                        nullable: true
                      razorpayPaymentId:
                        type: string
                        nullable: true
                      status:
                        type: string
                        enum:
                          - PENDING
                          - SUCCESS
                          - FAILED
                          - REFUNDED
                      method:
                        type: string
                        enum:
                          - ONLINE
                          - COD
                          - WALLET
                      couponId:
                        type: string
                        nullable: true
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      user:
                        type: object
                        properties:
                          id:
                            type: string
                          name:
                            type: string
                          email:
                            type: string
                          phone:
                            type: string
                      order:
                        type: object
                        properties:
                          id:
                            type: string
                          status:
                            type: string
                          total:
                            type: number
                          items:
                            type: array
                          address:
                            type: object
                      coupon:
                        type: object
                        nullable: true
        '401':
          description: Unauthorized - Admin authentication required
        '404':
          description: Payment not found
  /api/v1/admin/reviews:
    get:
      summary: Get all reviews
      description: >-
        Admin can view all product reviews for moderation with pagination and
        search.
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number for pagination
        - in: query
          name: limit
          schema:
            type: integer
            default: 20
          description: Number of items per page
        - in: query
          name: search
          schema:
            type: string
          description: >-
            Search term for review title, comment, product name, or user
            email/name
        - in: query
          name: rating
          schema:
            type: integer
            minimum: 1
            maximum: 5
          description: Filter reviews by rating
        - in: query
          name: isApproved
          schema:
            type: boolean
          description: Filter reviews by approval status
      responses:
        '200':
          description: List of reviews retrieved successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            productId:
                              type: string
                            userId:
                              type: string
                            rating:
                              type: integer
                              minimum: 1
                              maximum: 5
                            title:
                              type: string
                              nullable: true
                            comment:
                              type: string
                              nullable: true
                            images:
                              type: array
                              items:
                                type: string
                            isVerifiedPurchase:
                              type: boolean
                            isHelpful:
                              type: integer
                            isApproved:
                              type: boolean
                            createdAt:
                              type: string
                              format: date-time
                            updatedAt:
                              type: string
                              format: date-time
                            product:
                              type: object
                              properties:
                                id:
                                  type: string
                                name:
                                  type: string
                            user:
                              type: object
                              properties:
                                id:
                                  type: string
                                name:
                                  type: string
                                email:
                                  type: string
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                          limit:
                            type: integer
                          total:
                            type: integer
                          totalPages:
                            type: integer
        '401':
          description: Unauthorized - Admin authentication required
  /api/v1/admin/reviews/{id}:
    get:
      summary: Get single review by ID
      description: Admin can view detailed review information
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Review ID
          schema:
            type: string
      responses:
        '200':
          description: Review details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      productId:
                        type: string
                      userId:
                        type: string
                      rating:
                        type: integer
                      title:
                        type: string
                        nullable: true
                      comment:
                        type: string
                        nullable: true
                      images:
                        type: array
                        items:
                          type: string
                      isVerifiedPurchase:
                        type: boolean
                      isHelpful:
                        type: integer
                      isApproved:
                        type: boolean
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      product:
                        type: object
                        properties:
                          id:
                            type: string
                          name:
                            type: string
                          slug:
                            type: string
                      user:
                        type: object
                        properties:
                          id:
                            type: string
                          name:
                            type: string
                          email:
                            type: string
        '401':
          description: Unauthorized - Admin authentication required
        '404':
          description: Review not found
    put:
      summary: Update review (approve/reject)
      description: Admin can approve or reject product reviews
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Review ID
          schema:
            type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                isApproved:
                  type: boolean
                  example: true
                  description: Set to true to approve, false to reject
      responses:
        '200':
          description: Review updated successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                  - message
                properties:
                  success:
                    type: boolean
                  message:
                    type: string
                    example: Review updated successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      isApproved:
                        type: boolean
                      product:
                        type: object
                      user:
                        type: object
        '401':
          description: Unauthorized - Admin authentication required
        '404':
          description: Review not found
    delete:
      summary: Delete review
      description: Admin can delete a product review (recalculates product rating)
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Review ID
          schema:
            type: string
      responses:
        '200':
          description: Review deleted successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - message
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Review deleted successfully
                  data:
                    type: null
        '401':
          description: Unauthorized - Admin authentication required
        '404':
          description: Review not found
  /api/v1/admin/users:
    get:
      summary: Get all customer users
      description: >-
        Admin can view and manage all customer users (non-admin users only) with
        pagination and search.
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: page
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - name: limit
          in: query
          required: false
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 20
        - name: search
          in: query
          required: false
          schema:
            type: string
          description: Search by name, email, or phone
      responses:
        '200':
          description: List of customer users retrieved successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    required:
                      - items
                      - pagination
                    properties:
                      items:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                              example: 123e4567-e89b-12d3-a456-426614174000
                            email:
                              type: string
                              format: email
                              example: customer@example.com
                            name:
                              type: string
                              nullable: true
                              example: John Doe
                            phone:
                              type: string
                              nullable: true
                              example: '+1234567890'
                            isAdmin:
                              type: boolean
                              example: false
                            isSuperAdmin:
                              type: boolean
                              example: false
                            createdAt:
                              type: string
                              format: date-time
                            updatedAt:
                              type: string
                              format: date-time
                      pagination:
                        type: object
                        properties:
                          page:
                            type: integer
                            example: 1
                          limit:
                            type: integer
                            example: 20
                          total:
                            type: integer
                            example: 100
                          totalPages:
                            type: integer
                            example: 5
        '401':
          description: Unauthorized - Admin authentication required
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  error:
                    type: string
                    example: Unauthorized
  /api/v1/admin/users/{id}:
    get:
      summary: Get single customer user by ID
      description: Admin can view detailed information about a specific customer user
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Customer user ID
          schema:
            type: string
            example: 123e4567-e89b-12d3-a456-426614174000
      responses:
        '200':
          description: Customer user details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      email:
                        type: string
                        format: email
                      name:
                        type: string
                        nullable: true
                      phone:
                        type: string
                        nullable: true
                      isAdmin:
                        type: boolean
                      isSuperAdmin:
                        type: boolean
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      addresses:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            street:
                              type: string
                            city:
                              type: string
                            state:
                              type: string
                            zipCode:
                              type: string
                            country:
                              type: string
                            isDefault:
                              type: boolean
                      _count:
                        type: object
                        properties:
                          orders:
                            type: integer
                          reviews:
                            type: integer
        '401':
          description: Unauthorized - Admin authentication required
        '404':
          description: Customer user not found
    put:
      summary: Update customer user
      description: Admin can update customer user information (name and phone only)
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Customer user ID
          schema:
            type: string
      requestBody:
        required: false
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  example: John Doe
                phone:
                  type: string
                  example: '+1234567890'
      responses:
        '200':
          description: Customer user updated successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - data
                  - message
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Customer user updated successfully
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      email:
                        type: string
                      name:
                        type: string
                        nullable: true
                      phone:
                        type: string
                        nullable: true
                      isAdmin:
                        type: boolean
                      isSuperAdmin:
                        type: boolean
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '401':
          description: Unauthorized - Admin authentication required
        '404':
          description: Customer user not found
    delete:
      summary: Delete customer user
      description: Admin can delete customer users (cascade deletes related records)
      tags:
        - Admin
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: Customer user ID
          schema:
            type: string
      responses:
        '200':
          description: Customer user deleted successfully
          content:
            application/json:
              schema:
                type: object
                required:
                  - success
                  - message
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Customer user deleted successfully
                  data:
                    type: null
        '401':
          description: Unauthorized - Admin authentication required
        '404':
          description: Customer user not found
tags: []
